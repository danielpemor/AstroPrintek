---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import ServicesSection from '../components/ServicesSection.astro';
import WhyChooseSection from '../components/WhyChooseSection.astro';
---

<script is:inline>
  // Ejecutar inmediatamente antes que cargue nada
  (function() {
    // Verificar si el usuario viene de un cambio manual de idioma
    const urlParams = new URLSearchParams(window.location.search);
    const fromLangSwitch = urlParams.has('lang') || sessionStorage.getItem('manualLangSwitch');
    
    // Si viene de cambio manual, no redirigir
    if (fromLangSwitch) {
      sessionStorage.removeItem('manualLangSwitch');
      return;
    }
    
    // Solo redirigir si es la primera visita con navegador ingl√©s
    const browserLanguage = navigator.language || navigator.languages[0] || 'es';
    const isEnglish = browserLanguage.toLowerCase().startsWith('en');
    
    if (isEnglish && window.location.pathname === '/') {
      window.location.href = '/en/';
    }
  })();
</script>

<BaseLayout title="Printek">
  <Hero 
    title="Industrial & IT Sourcing"
    subtitle="Estrategias personalizadas para el abastecimiento industrial."
    backgroundVideo="/videos/mixkit-grunge-industrial-gears-viewed-in-detail-12339-hd-ready.mp4"
    backgroundImage="/images/industrial-fallback.jpg"
    ctaText="Ver propuestas"
    ctaLink="#services"
    secondaryCtaText="Contactar"
    secondaryCtaLink="/contact"
  />
  
  <ServicesSection />
  
  <WhyChooseSection />
  
</BaseLayout>